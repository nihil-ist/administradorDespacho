<div class="main-container">
  
    <div class="navbar-container">
      <app-navbar></app-navbar>
    </div>
    
    <div class="exp-container">
        <main class="exp-main">
          <section class="hero">
            <div>
              <h1>{{ isAdmin ? 'Expedientes del despacho' : 'Mis expedientes' }}</h1>
              <p>
                {{ isAdmin
                  ? 'Controla los asuntos por estado, crea nuevos expedientes y consulta su documentación centralizada.'
                  : 'Consulta y da seguimiento a los expedientes asignados a tu usuario.' }}
              </p>
            </div>
            <button class="primary" *ngIf="canCreateExpediente" (click)="navigateTo('nuevoExpediente')">
              <i class="fa-solid fa-file-circle-plus"></i>
              <span>Nuevo expediente</span>
            </button>
          </section>

          <section class="stats" *ngIf="stats(); else statsFallback">
            <article class="stat-card total">
              <p>Total de expedientes</p>
              <h2>{{ stats()?.total || 0 }}</h2>
            </article>
            <article
              class="stat-card"
              *ngFor="let card of statusCards"
              (click)="navigateTo(card.status)"
            >
              <div class="icon">
                <i class="fa-solid" [ngClass]="card.icon"></i>
              </div>
              <div>
                <p>{{ card.label }}</p>
                <h3>{{ getCountForStatus(card.status) }}</h3>
              </div>
            </article>
          </section>

          <ng-template #statsFallback>
            <section class="stats loading">
              <p *ngIf="!statsError()">Cargando estadísticas...</p>
              <p class="error" *ngIf="statsError()">{{ statsError() }}</p>
            </section>
          </ng-template>

          <section class="shortcuts">
            <article class="shortcut" (click)="navigateTo('EXHORTO')">
              <h4>Exhortos</h4>
              <p>Expedientes en etapa de exhorto y colaboración.</p>
            </article>
            <article class="shortcut" (click)="navigateTo('EN_PROCESO')">
              <h4>En proceso</h4>
              <p>Casos activos que requieren seguimiento.</p>
            </article>
            <article class="shortcut" (click)="navigateTo('TERMINADO')">
              <h4>Terminados</h4>
              <p>Historico de asuntos finalizados para consulta.</p>
            </article>
            <article class="shortcut" (click)="navigateTo('ARCHIVADO')">
              <h4>Archivados</h4>
              <p>Expedientes resguardados o en espera.</p>
            </article>
          </section>
        </main>
      
        
      </div>
      <footer class="exp-footer">
        <p>&copy; 2025 LOF</p>
        <a href="/home">Inicio</a> | 
        <a href="/configuracion">Configuración</a> | 
        <a href="/soporte">Soporte</a> | 
        <a href="/contacto">Contacto</a>
      </footer>
    </div>
    